<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>ESP32 Signal Monitor</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js"></script>
  <style>
    body { font-family: Arial; text-align: center; padding: 50px; }
    #status { font-size: 3em; color: #2b2b2b; margin-top: 40px; }
  </style>
</head>
<body>
  <h1>ESP32 Signal Monitor</h1>
  <div id="status">Loading...</div>

  <!-- COMPATIBLE version (NO import, NO modules needed) -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBTCuuV_6qMCarC7ZlLwpEDM8-B0m9pWYM",
    authDomain: "esp32-signal-monitor.firebaseapp.com",
    databaseURL: "https://esp32-signal-monitor-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "esp32-signal-monitor",
    storageBucket: "esp32-signal-monitor.firebasestorage.app",
    messagingSenderId: "339309270825",
    appId: "1:339309270825:web:689b121b434a74a6030938"
  };

  // Initialize Firebase using compat version
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  const statusDiv = document.getElementById("status");

  database.ref("esp32/status").on("value", snapshot => {
    const val = snapshot.val();
    statusDiv.textContent = val ? "Signal: " + val : "No signal";
  }, error => {
    statusDiv.textContent = "Error: " + error.code;
  });
</script>

</body>
</html>
