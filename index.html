<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Multi ESP32 Monitor</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial; text-align: center; padding: 50px; }
    h1 { font-size: 2em; }
    .device { margin-top: 20px; font-size: 1.2em; padding: 10px; border-bottom: 1px solid #ccc; }
    .mac { font-weight: bold; color: #555; }
    .msg { color: #222; }
  </style>
</head>
<body>
  <h1>ESP32 Board Messages</h1>
  <div id="devices"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBTCuuV_6qMCarC7ZlLwpEDM8-B0m9pWYM",
      authDomain: "esp32-signal-monitor.firebaseapp.com",
      databaseURL: "https://esp32-signal-monitor-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "esp32-signal-monitor",
      storageBucket: "esp32-signal-monitor.firebasestorage.app",
      messagingSenderId: "339309270825",
      appId: "1:339309270825:web:689b121b434a74a6030938"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const devicesDiv = document.getElementById("devices");

    db.ref("devices").on("value", snapshot => {
      const data = snapshot.val();
      devicesDiv.innerHTML = ''; // Clear all before update

      for (const mac in data) {
        const msg = data[mac];
        const deviceDiv = document.createElement("div");
        deviceDiv.className = "device";
        deviceDiv.innerHTML = `<div class="mac">ðŸ“¡ ${mac}</div><div class="msg">${msg}</div>`;
        devicesDiv.appendChild(deviceDiv);
      }
    });
  </script>
</body>
</html>
